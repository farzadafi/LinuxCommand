## Does Clean Code Matter?
کلین کد، آیا مهمه و اهمیتی داره؟ implementation pattern کتابی که نوشته شده توسط کنت بک. این کتاب خیلی معرکه اس اگر شما میخواید عادت های خوبی در کد زدن بسازید. اما در این کتاب، کنت می‌گوید که این بر اساس یک فرضیه‌ی شکننده است، اینکه کد خوب مهم است)منظور اینه که این باور که کد خوب اهمیت دارد، باور شکننده ای است(
شکننده؟ من اینطوری فکر نمیکنم. بزارید داستانی در مورد شرکت هایی که کشته شدن توسط کد بهتون بگم.

در زمان های دور، در یک شرکت دور، من از یک دیباگر که با سورس کد زبان سی کار میکرد استفاده میکردم. اون توسط یک شرکت به نام Sword ساخته شده بود. اون خیلی قدرتمند بود و تایم زیادی از ما رو save کرده بود.  اما در سال ۱۹۹۰ ما از زبان سی به زبان سی پلاس پلاس مهاجرت کردیم. شرکت Sword متعد شده که به زودی یه ورژن از دیباگر رو برای زبان سی پلاس پلاس تحویل بده. اما زمان به همین صورت گذشت و بعد از شش ماه اونها یه ورژن از دیباگر به ما دادن که ۴۵ دقیقه تایم گذشت برای اینکه بالا بیاد و بعدش کرش کرد. ما برنامه رو به سمت خودشون برگردوندیم و یه اخطار سخت بهشون دادیم. اونها دوباره متعهد شدن که به زودی یه ورژن جدید بهمون بدن. ما خیلی مشکوک بودیم به اینکه بتونن اینو تحویل بدن یا نه، اما با این حال صبر کردیم. شش ماه بعد، اونها یه ورژن جدید بهمون دادن. و شما چه فکری میکنید؟ ۴۵ دقیقه طول کشید تا بالا بیاد و بعدش کرش کرد!
بعد از اون به سادگی ما دیگه روی اونها حساب نکردیم. از نقطه نظر ما اون محصول دیگه مرد! این برای هیچ کس شگفت انگیز نیست که این شرکت بعد از شش ماه از بیزنس ها خارج شد.

ده سال بعد:  بعد از یک دهه من فردی رو ملاقات کردم که اون روزها داخل اون شرکت کار میکرد و داستان رو برای من تعریف کرد. او گفت که ما با عجله دیباگر زبان سی را وارد بازار کردیم. ما یک کد بزرگ و کثیف درست کرده بودیم. بعد از اون وقتی ما میخواستیم اون دیباگر رو کاری کنیم که بتونه با زبان سی پلاس پلاس هم کار کنه، دیدیم که این کار غیر ممکنه.

بنابراین کلین کد مطمئنا برای اونها اهمیت داشته. در آخر کد بد میتونه شرکت رو بکشه!
اما چه چیزی اشتباهی رخ داد؟ اون همه کد اشتباه که باعث نابود شدن اونها شده بودن چه بودن؟!

#### 1-The Productivity Trap
تا حالا روی پروژه ای که مزرعه سبز باشه کار کرده اید)منظور پروژه ای هستش که تمیز و پاکه و خیلی راحت میشه داخلش کد زد و برنامه رو توسعه داد(؟میتونید به یاد بیارید که بهره وری چقد بود؟ صاعقه از سر ناخن های شما بیرون میومد و فیچر ها رو بعد از فیچر ها پیاده سازی میکردین. شما واقعا سریع جلو میرفتین. کاربر ها از شما درخواست های جدید میکردن و شما اون رو تو چند ساعت داخل یک روز پیاده سازی میکردین. اما سرعت دوام نیاورد. یک سال و یا دو سال بعد اونقدر کند شدین که به خزیدن افتادین. شما سخت تر و سخت تر کار کردین و فیچر ها آروم تر و آروم تر جلو رفتن. و چرا؟ به دلیل اینکه به هم ریختگی داخل کد شما بزرگ و زیاد شده بود. و دست و پا زدن داخل این بهم ریختگی ها باعث کم شدن و خیلی کم شدن سرعت شما شده بود. اون بهره وری خیلی بالا که شما در زمان شروع ازش لذت میبردین کلا افول کرده و روی زمین نشسته. چیزی که برای شما چند ساعت طول میکشید الان چند روز طول میکشه، چیزی که از شما چند روز وقت میگرفته، الان ازتون چند هفته ماه ... وقت میگیره یا شاید هم کلا انجام نشه

productivity vs time image here

نگرانی مدیر ها کم کم زیاد شد. از اون بد تر، اونها برنامه های خودشون رو بر اساس اوایل توسعه دادن برنامه ریزی کرده بودن که بهره وری خیلی بالا بوده است. و الان با یه شکاف ترسناک در کارشون مواجه شدن.

اولین استراتژی مدیران برای پر کردن این شکاف وارد کردن فشار بیشتر بر روی توسعه دهندگان هستش. و این فقط باعث میشه که توسعه دهندگان زیر فشار بیشتر و بیشتر بهم ریختگی ایجاد کنن و علیرغم تلاشهای قهرمانانه، حتی باعث کاهش دادن بیشتر سرعت شدند. 

بعد از اون مدیران سعی میکنن تا اضافه کنن توسعه دهندگان جدیدی به تیم. البته این باعث شد که بهره وری باز هم به شدت کاهش پیدا کنه برای اینکه توسعه دهندگان جدید همه انرژی افراد قدیمی رو هم گرفتن. و در نهایت افراد جدید شروع به کار کردن سریع کردن و بهم ریختگی های خودشون رو ایجاد کردن و سرعت رو از همه بیشتر کاهش دادن. اضافه کردن مردان قدرتمند جدید ارزان نیستش. برای همین مدیران با افزایش هزینه و کاهش بهره وری مواجه شدند. مدیران با برنامه نویسان صحبت کردند و از برنامه نویسان پرسیدند که به نظر آنها چه باید کرد. البته توسعه دهندگان میدانستند باید چکاری انجام دهند، اونها ماه هاست که بر طبل های طراحی مجدد میکوبند. یکی از آنها گفت بهترین اتفاقی که می تواند برای این سیستم اتفاق بیفتد این است که با با یک آهنربای بزرگ وارد اتاق شویم!)نمیدونم یعنی چی!(آنچه این سیستم نیاز دارد یک طراحی مجدد اساسی هستش.

مدیران از این گزینه وحشت داشتند. اونها میدونستن که این گزینه چقد هزینه زیادی داره. و اصلا اطمینان نداشتند که آیا این کار اونها رو در وضعیت بهتری قرار میده یا نه؟ اما خب اونها چه کار دیگه ای میتونن انجام بدن؟

در نهایت اونها برنامه های دیگه رو لغو کردن و اجازه دادن که ریدیزاین پروژه انجام شه. برای برنامه نویسان این یک روز تازه بود. اونها دوباره میتونستن روی یک پروژه مزرعه سبز)منظور پروژه ای تمیز هستش(کار کنن و از بهم ریختگی ها دور باشن و مججدا عملکرد خوبی داشته باشن. اووووه روزت مبارک! بنابراین ما ده تا از بهترین و باهوش ترین ها رو برداشتیم، کسایی که ما رو از آشفتگی به سرزمین موعود پروژه مزرعه سبز هدایت میکنن. البته بقیه ما ها)دیگر برنامه نویسان شرکت به غیر از تیمی که قرار بود روی پروژه جدید کار کنن(از این تیم متنفر بودیم چونکه مشتریان قرار نبود منتظر بمونن تا تیم جدید کارشون رو تموم کنه. مشتریان به باگ فیکس ها و ویژگی های جدید احتیاج داشتن، بنابراین در حالی که تیم جدید در حال کار روی یک پروژه مزرعه سبز)پروژه ای خالی از آشفتگی(بودن ما مجبور بودیمه که با انجام کارهایی که مشتری ها داشتن از این آشفتگی ها عبور کنیم. در همین حالت تیم جدید به نیازمندی ها احتیاج داشت)منظور چیزایی هستش که باید براشون کد هایی زده شه(. به نظر شما آن نیازمندی ها چه بود؟ فکر میکنید اسناد نیازمندی ها وجود داشت؟ حتی اگه این اسناد وجود داشتن به نظر شما دقیق بودن؟ نه، اصلاحات لحظه آخری و یا نیمه شبی)منظور سریع و اجباری و بدون توجه( بسیار زیادی وجود داشت که باعث خرابی اسناد نیازمندی ها شده بودن و باعث میشد اون اسناد کارایی نداشته باشن. برای فهمیدن نیازمندی های جدید باید به کد قدیمی مراجعه میشد و نیازمندی ها از اون کد ها درک و پیاده سازی میشد. و بنابراین تیم جدید مجبور شد که از طریق کد های سیستم قدیمی نیازمندی ها را بفهمد تا بتواند پیاده سازی کند. و اینجا بود که مسابقه ای بین کد و تیم جدید شکل گرفت. هر بار که تیم جدید به نقطه ای میرسید که قبلا سیستم قدیمی در اون وضعیت بودش، سیستم قدیمی با اصلاحات جدیدی توسط تیم قدیمی ویرایش میشد و پیش میرفت!)به این ترتیب تیم جدید همیشه از نیازمندی ها عقب تر بودن(. من ده سال است که این مسابقه را دیده ام. در طول این سال ها اعضای تیم یکی یکی جایگزین شدند با افراد جدید. و مجددا سیستم بهم ریخته تر و بهم ریخته تر شد و شروع به پیچ و تاب خوردن کرد. و هرگز هم نشد که اونو دیپلوی کرد و ازش استفاده کرد و برنامه نویسان شروع به طراحی مجدد دوباره کردن! بنابراین کد های نامرتب میتونن یک پروژه، یک بخش یا حتی یک شرکت رو کند کنن. اما چگونه؟ کد های بهم ریخته چگونه میتونن تا این حد بهره وری رو پایین بیارن؟ مکانیسم آنها چیست؟ 

Code Rot
کد پوسیده و خراب
چه اتفاقی در کد می افتد؟ چرا به مرور زمان بد تر میشه؟ اون که خیلی تمیز شروع میشه. اون که خیلی زیبا شروع میشه. اما به مرور زمان انگار پوسیده خراب میشه مثل یک گوشت خراب. شما با نگاه کردن به حالت چهره برنامه نویسان میتونید بدونید که کدی که روش کار میکنن چقد قدمت داره)مثلا کسی که خیلی عصبانیه انگار داره روی کدی کار میکنه که خیلی قدمت داره و خیلی به هم ریخته اس و ...(. قبل از اینکه نگاه کنیم که چه اتفاقی داره میوفته، اجازه بدین به علائم نگاه کنیم. کد پوسیده چیه که کار ما رو کند میکنه. چطوری روی بهره وری ما اثر میزاره؟ چطوری روی پیش بینی های ما اثر میزاره؟ 

Rigidity 
سفتی یا سختی
 سیستم سخت سیستمیه که یک تغییر یا بهبود شما رو مجبور میکنه که چندین تغییر دیگه توی کل سیستم اعمال کنید. این اتفاق میفته چونکه کد ها در هم تنیده شدن و هر زمان که شما یک نقطه رو لمس میکنید، مجبور میشید که خیلی جاهای دیگه رو درست کنید و سپس باید خیلی کار های دیگه هم انجام بدین در جاهای دیگه)چون اینها هی زنجیر وار بهم وصلن دیگه(. توسعه دهندگان در اینجا مثل سگ ها)بلانسبت، البته به من ربطی نداره خود آنکل باب نوشته( دور خودشون میچرخن و دم خودشون رو در سرتاسر کد تعقیب میکنن. اینجا یه تغییر ایجاد میکنن، اونجا یه تغییر ایجاد میکنن، اونجا اونجا اونجا، هر جایی که ممکنه رو تغییر میدن، صد ها ماژول مختلف رو فقط برای اینکه سیستم دوباره کار کنه. سیستم سخت اصلا قابل پیش بینی نیست. تخمین زمان داخل اون خیلی سخته چونکه شما اصلا نمیدونید چند تا ماژول رو نیازه که تغییر بدین. 

Fragility
شکنندگی
سیستم های شکننده سیستم هایی هستند که خیلی جاهاشون خراب میشه وقتی که شما یه جاییشون رو دست میزنید. یک تغییر ساده میتونه باعث شه اختلال در عملکرد سیستم شه. خیلی سخته که تخمین بزنیم یه تایمی برای یه تغییر چون خیلی غیر قابل پیش بینی هستن. وقتی یک سیستم شکننده هستش کاربران و مدیران متوجه آن میشوند. اونها خیلی اختلالات عجیبی توی سیستم میبینن وقتی که دارن با سیستم کار میکنن. و این اختلالات خیلی باعث نگرانی اونها میشه. وقتی که برنامه نویسان یه تغییری اینجا)اشاره به یه طرف یک پل(اعمال میکنن، یه چیزی این ور)اشاره به اون سمت پل(خراب میشه. دیگه نمیشه به هیچ چیز وابسته بود. به نظر میرسد که برنامه نویسان ناتوان هستن و سیستم هم غیرقابل اعتماد به نطر میرسه.

Inseparability
جدایی ناپذیری
یک سیستم جدایی ناپذیر، سیستمی هستش که ماژول های ترکیب شده ای با هم دیگه داره که نمیتونن از هم جدا شن و برای اهداف دیگر ازشون استفاده کرد. ما معمولا سعی میکنیم سیستم هایی متشکل از ماژول هایی بسازیم که میتونن دوباره مورد استفاده قرار بگیرن. متاسفانه خیلی از اوقات این تلاش ها شکست میخورن. طراحان خیلی از اوقات برای مرز بندی ماژول های پروژه شکست میخورن. توسعه دهندگان نرم افزار با عجله از میانبر ها استفاده میکنن. این میانبر ها اغلب ماژول ها را به هم متصل میکنن و باعث میشه که آنها جدا نشدنی و قابل استفاده مجدد نباشن. سیستم های جدایی ناپذیر قابل پیش بینی نیستن. شما نمیدونید که آیا میتونید از هر یک از اجزای اون سیستم استفاده مجدد کنید یا خیر، بنابراین نمیتونید به طور قابل اعتمادی تخمین بزنید. 



















